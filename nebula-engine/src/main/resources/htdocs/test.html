<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>CSS在线-示例</title>
<style type="text/css">
/* Pillar type */
.pillar {background: transparent; width:40%; margin:0 auto;}
.pillar h1, .pillar p {margin:0 10px;}
.pillar h1 {font-size:2em; color:#fff; letter-spacing:1px;}
.pillar p {padding-bottom:0.5em;}
.pillar .top, .pillar .bottom {display:block; background:transparent; font-size:1px;}
.pillar .b1, .pillar .b2, .pillar .b3, .pillar .b4 {display:block; overflow:hidden;}
.pillar .b1, .pillar .b2, .pillar .b4 {height:1px;}
.pillar .b2, .pillar .b3 {background:#d66; border-left:1px solid #fff; border-right:1px solid #fff;}
.pillar .b4 {background:#d66; border-left:4px solid #fff; border-right:4px solid #fff;}
.pillar .b1 {margin:0 2px; background:#fff;}
.pillar .b2 {margin:0 1px; border-width:0 1px;}
.pillar .b3 {height:2px; margin:0;}
.pillar .b4 {margin:0 2px;}
.pillar .boxcontent {display:block; background:#d66; border-left:1px solid #fff; border-right:1px solid #fff; margin:0 5px;}
</style>
</head>
<body>

<div class="pillar">
<b class="top"><b class="b1"></b><b class="b2"></b><b class="b3"></b><b class="b2"></b><b class="b4"></b></b>
<div class="boxcontent">
<h1>NEW! Pillar shape</h1>
<p>Corners to give a rounded pillar effect.</p>
</div>
<b class="bottom"><b class="b4"></b><b class="b2"></b><b class="b3"></b><b class="b2"></b><b class="b1"></b></b>
</div>

<script>

var MatchBuild = function(when) {
        // TODO(i): this code is convoluted and inefficient, we should construct the route matching
        //   regex only once and then reuse it
        var regex = '^' + when.replace(/([\.\\\(\)\^\$])/g, "\\$1") + '$',
            params = [],
            paramMatchs = [],
            dst = {};
        forEach(when.split(/\W/), function(param) {
          if (param) {
            var paramRegExp = new RegExp(":" + param + "([\\W])");
            if (regex.match(paramRegExp)) {
              regex = regex.replace(paramRegExp, "([^\\/]*)$1");
              params.push(param);
              paramMatchs.push(paramRegExp);
            }
          }
        });
        
        var regexp = new RegExp(regex);
        
        return {
        	check:function(on){
	            var match = on.match(regexp);
		        if (match) {
		          forEach(params, function(name, index) {
		            dst[name] = match[index + 1];
		          });
		        }
		        return match ? dst : null;
        	},
        	replace:function(on,url){
	            var match = on.match(regexp);
		        if (match) {
		          forEach(params, function(name, index) {
		            url = url.replace(paramMatchs[index],match[index + 1]);
		          });
		        }
		        return url;        		
        	}
      }
} 

var m = MatchBuild("/:name/:id");

alert(m.check("/type/wang"));
alert(m.replace("/angula-:name/ttt:id"));


</script>

</div>
</body>
</html>