<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>CSS在线-示例</title>
	<!-- jquery start -->
	<script src="lib/jquery/jquery-1.7.2.min.js"></script>
	<!-- jquery end -->
	
</head>
<body>
<script>
jQuery.noConflict();
(function($) { 
  $(function() {
    // 使用 $ 作为 jQuery 别名的代码



    
$("#btn").click(function(){
	var MatchBuild = function(when) {
        // TODO(i): this code is convoluted and inefficient, we should construct the route matching
        //   regex only once and then reuse it
        var regex = '^' + when.replace(/([\.\\\(\)\^\$])/g, "\\$1") + '$',
            params = [],
            paramMatchs = [],
            dst = {};
        $.each(when.split(/\W/), function(index,param) {
          if (param) {
            var paramRegExp = new RegExp(":" + param + "([\\W])");
            if (regex.match(paramRegExp)) {
              regex = regex.replace(paramRegExp, "([^\\/]*)$1");
              params.push(param);
              paramMatchs.push(new RegExp(":" + param));
            }
          }
        });
        
        var regexp = new RegExp(regex);
        
        return {
        	check:function(on){
        		
	            var match = on.match(regexp);
		        if (match) {
		          $.each(params, function(index,name) {
		            dst[name] = match[index + 1];
		          });
		        }
		        return match ? dst : null;
        	},
        	replace:function(on,url){
	            var match = on.match(regexp);
		        if (match) {
		        	$.each(params, function(index,name) {
		            url = url.replace(paramMatchs[index],match[index + 1]);
		          });
		        }
		        return url;        		
        	}
      }
} 
    
	
var m = MatchBuild("/d/:type/");


alert(m.check("/d/type/"));
alert(m.replace("/d/Person/","/angularjs/:type/popup.html"));
});
  });
})(jQuery);
</script>

<input type="button" id="btn" value="Click me"/>
</div>
</body>
</html>