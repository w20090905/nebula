<!DOCTYPE html>
<html lang="cn">
<head>
<meta charset="utf-8" />
<title>○○××管理系统</title>
<meta name="description" content="nebule-rest的展示工程" />
<meta name="keywords" content="nebule-rest" />
<!-- Favicons --> 
<link rel="shortcut icon" type="image/png" href="/nebula-rest-sample/img/favicons/favicon.png"/>
<link rel="icon" type="image/png" href="/nebula-rest-sample/img/favicons/favicon.png"/>
<link rel="apple-touch-icon" href="/nebula-rest-sample/img/favicons/apple.png" />
<!-- Stylesheet --> 
<link rel="stylesheet" href="/nebula-rest-sample/css/style.css" type="text/css" />
<link rel="stylesheet" href="/nebula-rest-sample/css/custom.css" type="text/css" />
<!-- jQuery with plugins -->
<script type="text/javascript" src="/nebula-rest-sample/scripts/jquery-1.6.1.js"></script>
<!-- jQuery form validation -->
<script type="text/javascript" src="/nebula-rest-sample/scripts/jquery.validate.js"></script>
<script type="text/javascript">

$(document).ready(function() {
    
    // validate signup form on keyup and submit
    var validator = $("#loginform").validate({
        rules: {
            username: "required",
            password: "required"
        },
        messages: {
            username: "用户名不能为空！",
            password: "密码不能为空！"
        },
        // the errorPlacement has to take the layout into account
        errorPlacement: function(error, element) {
            error.insertAfter(element.parent().find('label:first'));
        },
        // set new class to error-labels to indicate valid fields
        success: function(label) {
            // set &nbsp; as text for IE
            label.html("&nbsp;").addClass("ok");
        },
        submitHandler: function(form) {
    		$.ajax({
    			type : "POST",
    			url : "/nebula-rest-sample/administry/user/!validate/",
    			data : $(form).serialize(),
    			dataType : "json",
    			success : function(data) {
    				if (data) {
    		        	location.href="/nebula-rest-sample/templates/administry/main.html";
    				} else {
    					$("#info").replaceWith('<div class="box box-error">用户名或密码不正确！</div>');
    				}
    			}
    		});
        }
    });
});
</script>
</head>
<body>
    <!-- Header -->
    <header id="top">
        <div class="wrapper-login">
            <!-- Title/Logo - can use text instead of image -->
            <div id="title"><img src="/nebula-rest-sample/img/logo.png" alt="Administry"/></div>
            <!-- Main navigation -->
            <nav id="menu">
                <ul class="sf-menu">
                    <li class="current"><a href="#">登录</a></li>
                </ul>
            </nav>
            <!-- End of Main navigation -->
			<!-- Aside links --> 
			<aside><b>中文</b> &middot; <a href="#">English</a> &middot; <a href="#">日本語</a></aside> 
			<!-- End of Aside links --> 
        </div>
    </header>
    <!-- End of Header -->
    <!-- Page title -->
    <div id="pagetitle">
        <div class="wrapper-login"></div>
    </div>
    <!-- End of Page title -->
    
    <!-- Page content -->
    <div id="page">
        <!-- Wrapper -->
        <div class="wrapper-login">
                <!-- Login form -->
                <section class="full">                    
                    
                    <h3>登录&nbsp;&nbsp;&nbsp;&nbsp;○○××管理系统</h3>
                    
                    <div id="info" class="box box-info">请输入用户名和密码</div>

                    <form id="loginform" method="post" action="j_security_check">

                        <p>
                            <label class="required" for="username">用户名:</label><br/>
                            <input type="text" id="username" class="full" value="" name="username"/>
                        </p>
                        
                        <p>
                            <label class="required" for="password">密码:</label><br/>
                            <input type="password" id="password" class="full" value="" name="password"/>
                        </p>
                        
                        <p>
                            <input type="checkbox" id="remember" class="" value="1" name="remember"/>
                            <label class="choice" for="remember">保持登录状态</label>
                        </p>
                        
                        <p>
                            <input id="loginbtn" type="submit" class="btn btn-green big" value="登录"/> &nbsp; <a href="javascript: //;" onClick="$('#emailform').slideDown(); return false;">忘记密码？</a>
                        </p>
                        <div class="clear">&nbsp;</div>

                    </form>
                    
                    <form id="emailform" style="display:none" method="post" action="javascript: void(0);">
                        <div class="box">
                            <p id="emailinput">
                                <label for="email">Email:</label><br/>
                                <input type="text" id="email" class="full" value="" name="email"/>
                            </p>
                            <p>
                                <input type="submit" class="btn" value="发送"/>
                            </p>
                        </div>
                    </form>
                    
                </section>
                <!-- End of login form -->
                
        </div>
        <!-- End of Wrapper -->
    </div>
    <!-- End of Page content -->
    <!-- Page footer -->
    <footer id="bottom">
        <div class="wrapper-login">
            <p>Copyright &copy; 2011 <a href="#" title="上海迹线科技有限公司">上海迹线科技有限公司</a></p>
        </div>
    </footer>
    <!-- End of Page footer -->

</body>
</html>